(function(){var b,d=[].indexOf|| function(g){for(var f=0,h=this.length;f< h;f++){if(f in  this&& this[f]=== g){return f}};return -1},e=[].slice,a=function(j,k){return function(){return j.apply(k,arguments)}},c={}.hasOwnProperty;b= function(m){if( typeof exports=== "object"&&  typeof module=== "object"){return m(require("jquery"))}else {if( typeof define=== "function"&& define.amd){return define(["jquery"],m)}else {return m(jQuery)}}};b(function($){var y,o,q,p,r,s,t,u,v,w,x,z,A,B,C,D,E,F;o= function(H,J,G){var I,K,L,M;H+= "";K= H.split(".");L= K[0];M= K.length> 1?G+ K[1]:"";I= /(\d+)(\d{3})/;while(I.test(L)){L= L.replace(I,"$1"+ J+ "$2")};return L+ M};x= function(O){var N;N= {digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:"",showZero:false};O= $.extend(N,O);return function(K){var P;if(isNaN(K)||  !isFinite(K)){return ""};if(K=== 0&&  !O.showZero){return ""};P= o((O.scaler* K).toFixed(O.digitsAfterDecimal),O.thousandsSep,O.decimalSep);return ""+ O.prefix+ P+ O.suffix}};C= x();D= x({digitsAfterDecimal:0});E= x({digitsAfterDecimal:1,scaler:100,suffix:"%"});q= {count:function(Q){if(Q== null){Q= D};return function(){return function(S,T,R){return {count:0,push:function(){return this.count++},value:function(){return this.count},format:Q}}}},countUnique:function(Q){if(Q== null){Q= D};return function(U){var V;V= U[0];return function(S,T,R){return {uniq:[],push:function(W){var X;if(X= W[V],d.call(this.uniq,X)< 0){return this.uniq.push(W[V])}},value:function(){return this.uniq.length},format:Q,numInputs:V!= null?0:1}}}},listUnique:function(Y){return function(U){var V;V= U[0];return function(S,T,R){return {uniq:[],push:function(W){var X;if(X= W[V],d.call(this.uniq,X)< 0){return this.uniq.push(W[V])}},value:function(){return this.uniq.join(Y)},format:function(K){return K},numInputs:V!= null?0:1}}}},sum:function(Q){if(Q== null){Q= C};return function(U){var V;V= U[0];return function(S,T,R){return {sum:0,push:function(W){if(!isNaN(parseFloat(W[V]))){return this.sum+= parseFloat(W[V])}},value:function(){return this.sum},format:Q,numInputs:V!= null?0:1}}}},min:function(Q){if(Q== null){Q= C};return function(U){var V;V= U[0];return function(S,T,R){return {val:null,push:function(W){var X,K;K= parseFloat(W[V]);if(!isNaN(K)){return this.val= Math.min(K,(X= this.val)!= null?X:K)}},value:function(){return this.val},format:Q,numInputs:V!= null?0:1}}}},max:function(Q){if(Q== null){Q= C};return function(U){var V;V= U[0];return function(S,T,R){return {val:null,push:function(W){var X,K;K= parseFloat(W[V]);if(!isNaN(K)){return this.val= Math.max(K,(X= this.val)!= null?X:K)}},value:function(){return this.val},format:Q,numInputs:V!= null?0:1}}}},average:function(Q){if(Q== null){Q= C};return function(U){var V;V= U[0];return function(S,T,R){return {sum:0,len:0,push:function(W){if(!isNaN(parseFloat(W[V]))){this.sum+= parseFloat(W[V]);return this.len++}},value:function(){return this.sum/ this.len},format:Q,numInputs:V!= null?0:1}}}},sumOverSum:function(Q){if(Q== null){Q= C};return function(U){var Z,ba;ba= U[0],Z= U[1];return function(S,T,R){return {sumNum:0,sumDenom:0,push:function(W){if(!isNaN(parseFloat(W[ba]))){this.sumNum+= parseFloat(W[ba])};if(!isNaN(parseFloat(W[Z]))){return this.sumDenom+= parseFloat(W[Z])}},value:function(){return this.sumNum/ this.sumDenom},format:Q,numInputs:(ba!= null)&& (Z!= null)?0:2}}}},sumOverSumBound80:function(bb,Q){if(bb== null){bb= true};if(Q== null){Q= C};return function(U){var Z,ba;ba= U[0],Z= U[1];return function(S,T,R){return {sumNum:0,sumDenom:0,push:function(W){if(!isNaN(parseFloat(W[ba]))){this.sumNum+= parseFloat(W[ba])};if(!isNaN(parseFloat(W[Z]))){return this.sumDenom+= parseFloat(W[Z])}},value:function(){var bc;bc= bb?1:-1;return (0.821187207574908/ this.sumDenom+ this.sumNum/ this.sumDenom+ 1.2815515655446004* bc* Math.sqrt(0.410593603787454/ (this.sumDenom* this.sumDenom)+ (this.sumNum* (1- this.sumNum/ this.sumDenom))/ (this.sumDenom* this.sumDenom)))/ (1+ 1.642374415149816/ this.sumDenom)},format:Q,numInputs:(ba!= null)&& (Z!= null)?0:2}}}},fractionOf:function(be,bd,Q){if(bd== null){bd= "total"};if(Q== null){Q= E};return function(){var K;K= 1<= arguments.length?e.call(arguments,0):[];return function(S,T,R){return {selector:{total:[[],[]],row:[T,[]],col:[[],R]}[bd],inner:be.apply(null,K)(S,T,R),push:function(W){return this.inner.push(W)},format:Q,value:function(){return this.inner.value()/ S.getAggregator.apply(S,this.selector).inner.value()},numInputs:be.apply(null,K)().numInputs}}}}};p= (function(bf){return {"Count":bf.count(D),"Count Unique Values":bf.countUnique(D),"List Unique Values":bf.listUnique(", "),"Sum":bf.sum(C),"Integer Sum":bf.sum(D),"Average":bf.average(C),"Minimum":bf.min(C),"Maximum":bf.max(C),"Sum over Sum":bf.sumOverSum(C),"80% Upper Bound":bf.sumOverSumBound80(true,C),"80% Lower Bound":bf.sumOverSumBound80(false,C),"Sum as Fraction of Total":bf.fractionOf(bf.sum(),"total",E),"Sum as Fraction of Rows":bf.fractionOf(bf.sum(),"row",E),"Sum as Fraction of Columns":bf.fractionOf(bf.sum(),"col",E),"Count as Fraction of Total":bf.fractionOf(bf.count(),"total",E),"Count as Fraction of Rows":bf.fractionOf(bf.count(),"row",E),"Count as Fraction of Columns":bf.fractionOf(bf.count(),"col",E)}})(q);A= {"Table":function(bg,O){return z(bg,O)},"Table Barchart":function(bg,O){return $(z(bg,O)).barchart()},"Heatmap":function(bg,O){return $(z(bg,O)).heatmap()},"Row Heatmap":function(bg,O){return $(z(bg,O)).heatmap("rowheatmap")},"Col Heatmap":function(bg,O){return $(z(bg,O)).heatmap("colheatmap")}};u= {en:{aggregators:p,renderers:A,localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter results",totals:"Totals",vs:"vs",by:"by"}}};v= ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r= ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];F= function(bh){return ("0"+ bh).substr(-2,2)};s= {bin:function(bj,bi){return function(W){return W[bj]- W[bj]% bi}},dateFormat:function(bj,bl,bo,bm,bk){var bn;if(bo== null){bo= false};if(bm== null){bm= v};if(bk== null){bk= r};bn= bo?"UTC":"";return function(W){var bp;bp=  new Date(Date.parse(W[bj]));if(isNaN(bp)){return ""};return bl.replace(/%(.)/g,function(bq,br){switch(br){case "y":return bp["get"+ bn+ "FullYear"]();case "m":return F(bp["get"+ bn+ "Month"]()+ 1);case "n":return bm[bp["get"+ bn+ "Month"]()];case "d":return F(bp["get"+ bn+ "Date"]());case "w":return bk[bp["get"+ bn+ "Day"]()];case "x":return bp["get"+ bn+ "Day"]();case "H":return F(bp["get"+ bn+ "Hours"]());case "M":return F(bp["get"+ bn+ "Minutes"]());case "S":return F(bp["get"+ bn+ "Seconds"]());default:return "%"+ br}})}}};w= (function(bs){return function(bv,by){var bt,bu,bw,bx,bz,bA,bB;bA= /(\d+)|(\D+)/g;bz= /\d/;bB= /^0/;if( typeof bv=== "number"||  typeof by=== "number"){if(isNaN(bv)){return 1};if(isNaN(by)){return -1};return bv- by};bt= String(bv).toLowerCase();bw= String(by).toLowerCase();if(bt=== bw){return 0};if(!(bz.test(bt)&& bz.test(bw))){return (bt> bw?1:-1)};bt= bt.match(bA);bw= bw.match(bA);while(bt.length&& bw.length){bu= bt.shift();bx= bw.shift();if(bu!== bx){if(bz.test(bu)&& bz.test(bx)){return bu.replace(bB,".0")- bx.replace(bB,".0")}else {return (bu> bx?1:-1)}}};return bt.length- bw.length}})(this);B= function(bD){var f,bC,K;bC= {};for(f in bD){K= bD[f];bC[K]= f};return function(bt,bw){if((bC[bt]!= null)&& (bC[bw]!= null)){return bC[bt]- bC[bw]}else {if(bC[bt]!= null){return -1}else {if(bC[bw]!= null){return 1}else {return w(bt,bw)}}}}};t= function(bF,V){var bE;bE= bF(V);if($.isFunction(bE)){return bE}else {return w}};$.pivotUtilities= {aggregatorTemplates:q,aggregators:p,renderers:A,derivers:s,locales:u,naturalSort:w,numberFormat:x,sortAs:B};y= (function(){function y(bK,O){this.getAggregator= a(this.getAggregator,this);this.getRowKeys= a(this.getRowKeys,this);this.getColKeys= a(this.getColKeys,this);this.sortKeys= a(this.sortKeys,this);this.arrSort= a(this.arrSort,this);this.aggregator= O.aggregator;this.aggregatorName= O.aggregatorName;this.colAttrs= O.cols;this.rowAttrs= O.rows;this.valAttrs= O.vals;this.sorters= O.sorters;this.tree= {};this.rowKeys= [];this.colKeys= [];this.rowTotals= {};this.colTotals= {};this.allTotal= this.aggregator(this,[],[]);this.sorted= false;y.forEachRecord(bK,O.derivedAttributes,(function(bs){return function(W){if(O.filter(W)){return bs.processRecord(W)}}})(this))}y.forEachRecord= function(bK,bI,bJ){var bG,bH,f,bL,bM,h,bN,W,X,bO,bP,bQ;if($.isEmptyObject(bI)){bG= bJ}else {bG= function(W){var bM,X,bR;for(bM in bI){bR= bI[bM];W[bM]= (X= bR(W))!= null?X:W[bM]};return bJ(W)}};if($.isFunction(bK)){return bK(bG)}else {if($.isArray(bK)){if($.isArray(bK[0])){bO= [];for(f in bK){if(!c.call(bK,f)){continue};bH= bK[f];if(!(f> 0)){continue};W= {};X= bK[0];for(bL in X){if(!c.call(X,bL)){continue};bM= X[bL];W[bM]= bH[bL]};bO.push(bG(W))};return bO}else {bP= [];for(h= 0,bN= bK.length;h< bN;h++){W= bK[h];bP.push(bG(W))};return bP}}else {if(bK instanceof  jQuery){bQ= [];$("thead > tr > th",bK).each(function(f){return bQ.push($(this).text())});return $("tbody > tr",bK).each(function(f){W= {};$("td",this).each(function(bL){return W[bQ[bL]]= $(this).text()});return bG(W)})}else {throw  new Error("unknown input format")}}}};y.convertToArray= function(bK){var P;P= [];y.forEachRecord(bK,{},function(W){return P.push(W)});return P};y.prototype.arrSort= function(bS){var bt,bT;bT= (function(){var h,bN,bO;bO= [];for(h= 0,bN= bS.length;h< bN;h++){bt= bS[h];bO.push(t(this.sorters,bt))};return bO}).call(this);return function(bt,bw){var bU,f,bV;for(f in bT){if(!c.call(bT,f)){continue};bV= bT[f];bU= bV(bt[f],bw[f]);if(bU!== 0){return bU}};return 0}};y.prototype.sortKeys= function(){if(!this.sorted){this.sorted= true;this.rowKeys.sort(this.arrSort(this.rowAttrs));return this.colKeys.sort(this.arrSort(this.colAttrs))}};y.prototype.getColKeys= function(){this.sortKeys();return this.colKeys};y.prototype.getRowKeys= function(){this.sortKeys();return this.rowKeys};y.prototype.processRecord= function(W){var R,bW,bX,h,bN,bY,bZ,X,ca,cb,cc,T,K;R= [];T= [];X= this.colAttrs;for(h= 0,bN= X.length;h< bN;h++){K= X[h];R.push((ca= W[K])!= null?ca:"null")};cb= this.rowAttrs;for(bZ= 0,bY= cb.length;bZ< bY;bZ++){K= cb[bZ];T.push((cc= W[K])!= null?cc:"null")};bX= T.join(String.fromCharCode(0));bW= R.join(String.fromCharCode(0));this.allTotal.push(W);if(T.length!== 0){if(!this.rowTotals[bX]){this.rowKeys.push(T);this.rowTotals[bX]= this.aggregator(this,T,[])};this.rowTotals[bX].push(W)};if(R.length!== 0){if(!this.colTotals[bW]){this.colKeys.push(R);this.colTotals[bW]= this.aggregator(this,[],R)};this.colTotals[bW].push(W)};if(R.length!== 0&& T.length!== 0){if(!this.tree[bX]){this.tree[bX]= {}};if(!this.tree[bX][bW]){this.tree[bX][bW]= this.aggregator(this,T,R)};return this.tree[bX][bW].push(W)}};y.prototype.getAggregator= function(T,R){var cd,bW,bX;bX= T.join(String.fromCharCode(0));bW= R.join(String.fromCharCode(0));if(T.length=== 0&& R.length=== 0){cd= this.allTotal}else {if(T.length=== 0){cd= this.colTotals[bW]}else {if(R.length=== 0){cd= this.rowTotals[bX]}else {cd= this.tree[bX][bW]}}};return cd!= null?cd:{value:(function(){return null}),format:function(){return ""}}};return y})();z= function(ci,O){var ce,cf,cg,R,ch,N,f,bL,cj,P,ck,T,cl,cm,cn,co,cp,cq,cr,cs,K;N= {localeStrings:{totals:"Totals"}};O= $.extend(N,O);cg= ci.colAttrs;ck= ci.rowAttrs;cl= ci.getRowKeys();ch= ci.getColKeys();P= document.createElement("table");P.className= "pvtTable";cm= function(ct,f,bL){var h,cu,bZ,cv,X,ca,cw,K;if(f!== 0){cv= true;for(K= h= 0,X= bL;0<= X?h<= X:h>= X;K= 0<= X?++h:--h){if(ct[f- 1][K]!== ct[f][K]){cv= false}};if(cv){return -1}};cu= 0;while(f+ cu< ct.length){cw= false;for(K= bZ= 0,ca= bL;0<= ca?bZ<= ca:bZ>= ca;K= 0<= ca?++bZ:--bZ){if(ct[f][K]!== ct[f+ cu][K]){cw= true}};if(cw){break};cu++};return cu};for(bL in cg){if(!c.call(cg,bL)){continue};cf= cg[bL];cq= document.createElement("tr");if(parseInt(bL)=== 0&& ck.length!== 0){co= document.createElement("th");co.setAttribute("colspan",ck.length);co.setAttribute("rowspan",cg.length);cq.appendChild(co)};co= document.createElement("th");co.className= "pvtAxisLabel";co.textContent= cf;cq.appendChild(co);for(f in ch){if(!c.call(ch,f)){continue};R= ch[f];K= cm(ch,parseInt(f),parseInt(bL));if(K!==  -1){co= document.createElement("th");co.className= "pvtColLabel";co.textContent= R[bL];co.setAttribute("colspan",K);if(parseInt(bL)=== cg.length- 1&& ck.length!== 0){co.setAttribute("rowspan",2)};cq.appendChild(co)}};if(parseInt(bL)=== 0){co= document.createElement("th");co.className= "pvtTotalLabel";co.innerHTML= O.localeStrings.totals;co.setAttribute("rowspan",cg.length+ (ck.length=== 0?0:1));cq.appendChild(co)};P.appendChild(cq)};if(ck.length!== 0){cq= document.createElement("tr");for(f in ck){if(!c.call(ck,f)){continue};cj= ck[f];co= document.createElement("th");co.className= "pvtAxisLabel";co.textContent= cj;cq.appendChild(co)};co= document.createElement("th");if(cg.length=== 0){co.className= "pvtTotalLabel";co.innerHTML= O.localeStrings.totals};cq.appendChild(co);P.appendChild(cq)};for(f in cl){if(!c.call(cl,f)){continue};T= cl[f];cq= document.createElement("tr");for(bL in T){if(!c.call(T,bL)){continue};cr= T[bL];K= cm(cl,parseInt(f),parseInt(bL));if(K!==  -1){co= document.createElement("th");co.className= "pvtRowLabel";co.textContent= cr;co.setAttribute("rowspan",K);if(parseInt(bL)=== ck.length- 1&& cg.length!== 0){co.setAttribute("colspan",2)};cq.appendChild(co)}};for(bL in ch){if(!c.call(ch,bL)){continue};R= ch[bL];ce= ci.getAggregator(T,R);cs= ce.value();cn= document.createElement("td");cn.className= "pvtVal row"+ f+ " col"+ bL;cn.textContent= ce.format(cs);cn.setAttribute("data-value",cs);cq.appendChild(cn)};cp= ci.getAggregator(T,[]);cs= cp.value();cn= document.createElement("td");cn.className= "pvtTotal rowTotal";cn.textContent= cp.format(cs);cn.setAttribute("data-value",cs);cn.setAttribute("data-for","row"+ f);cq.appendChild(cn);P.appendChild(cq)};cq= document.createElement("tr");co= document.createElement("th");co.className= "pvtTotalLabel";co.innerHTML= O.localeStrings.totals;co.setAttribute("colspan",ck.length+ (cg.length=== 0?0:1));cq.appendChild(co);for(bL in ch){if(!c.call(ch,bL)){continue};R= ch[bL];cp= ci.getAggregator([],R);cs= cp.value();cn= document.createElement("td");cn.className= "pvtTotal colTotal";cn.textContent= cp.format(cs);cn.setAttribute("data-value",cs);cn.setAttribute("data-for","col"+ bL);cq.appendChild(cn)};cp= ci.getAggregator([],[]);cs= cp.value();cn= document.createElement("td");cn.className= "pvtGrandTotal";cn.textContent= cp.format(cs);cn.setAttribute("data-value",cs);cq.appendChild(cn);P.appendChild(cq);P.setAttribute("data-numrows",cl.length);P.setAttribute("data-numcols",ch.length);return P};$.fn.pivot= function(bK,O){var N,cx,ci,P,K;N= {cols:[],rows:[],vals:[],filter:function(){return true},aggregator:q.count()(),aggregatorName:"Count",sorters:function(){},derivedAttributes:{},renderer:z,rendererOptions:null,localeStrings:u.en.localeStrings};O= $.extend(N,O);P= null;try{ci=  new y(bK,O);try{P= O.renderer(ci,O.rendererOptions)}catch(_error){cx= _error;if( typeof console!== "undefined"&& console!== null){console.error(cx.stack)};P= $("<span>").html(O.localeStrings.renderError)}}catch(_error){cx= _error;if( typeof console!== "undefined"&& console!== null){console.error(cx.stack)};P= $("<span>").html(O.localeStrings.computeError)};K= this[0];while(K.hasChildNodes()){K.removeChild(K.lastChild)};return this.append(P)};$.fn.pivotUI= function(bK,cD,cI,cG){var bt,ce,cy,cz,cf,cA,N,cx,cB,j,f,cC,bM,h,bN,bY,cE,cF,bZ,cH,O,cJ,cK,X,ca,cb,cc,cL,cM,cN,cO,cP,cQ,bQ,cR,cS,cT,cU,cV,K;if(cI== null){cI= false};if(cG== null){cG= "en"};if(u[cG]== null){cG= "en"};N= {derivedAttributes:{},aggregators:u[cG].aggregators,renderers:u[cG].renderers,hiddenAttributes:[],menuLimit:200,cols:[],rows:[],vals:[],exclusions:{},inclusions:{},unusedAttrsVertical:85,autoSortUnusedAttrs:false,rendererOptions:{localeStrings:u[cG].localeStrings},onRefresh:null,filter:function(){return true},sorters:function(){},localeStrings:u[cG].localeStrings};cB= this.data("pivotUIOptions");if((cB== null)|| cI){O= $.extend(N,cD)}else {O= cB};try{bK= y.convertToArray(bK);bQ= (function(){var X,bO;X= bK[0];bO= [];for(bM in X){if(!c.call(X,bM)){continue};bO.push(bM)};return bO})();X= O.derivedAttributes;for(cf in X){if(!c.call(X,cf)){continue};if((d.call(bQ,cf)< 0)){bQ.push(cf)}};cz= {};for(h= 0,bN= bQ.length;h< bN;h++){K= bQ[h];cz[K]= {}};y.forEachRecord(bK,O.derivedAttributes,function(W){var cW,bO,bR;bO= [];for(bM in W){if(!c.call(W,bM)){continue};bR= W[bM];if(!(O.filter(W))){continue};if(bR== null){bR= "null"};if((cW= cz[bM])[bR]== null){cW[bR]= 0};bO.push(cz[bM][bR]++)};return bO});cT= $("<table>",{"class":"pvtUi"}).attr("cellpadding",5);cP= $("<td>");cO= $("<select>").addClass("pvtRenderer").appendTo(cP).bind("change",function(){return cM()});ca= O.renderers;for(K in ca){if(!c.call(ca,K)){continue};$("<option>").val(K).html(K).appendTo(cO)};cA= $("<td>").addClass("pvtAxisContainer pvtUnused");cQ= (function(){var bY,bZ,bO;bO= [];for(bZ= 0,bY= bQ.length;bZ< bY;bZ++){cf= bQ[bZ];if(d.call(O.hiddenAttributes,cf)< 0){bO.push(cf)}};return bO})();cV= false;if(O.unusedAttrsVertical=== "auto"){cU= 120}else {cU= parseInt(O.unusedAttrsVertical)};if(!isNaN(cU)){cy= 0;for(bZ= 0,bY= cQ.length;bZ< bY;bZ++){bt= cQ[bZ];cy+= bt.length};cV= cy> cU};if(O.unusedAttrsVertical=== true|| cV){cA.addClass("pvtVertList")}else {cA.addClass("pvtHorizList")};j= function(cf){var cX,cY,cZ,da,db,dc,dd,cE,cH,cb,de,df,dg,bR,dh;dd= (function(){var bO;bO= [];for(bM in cz[cf]){bO.push(bM)};return bO})();dc= false;dh= $("<div>").addClass("pvtFilterBox").hide();dh.append($("<h4>").text(cf+ " ("+ dd.length+ ")"));if(dd.length> O.menuLimit){dh.append($("<p>").html(O.localeStrings.tooMany))}else {cY= $("<p>").appendTo(dh);cY.append($("<button>",{type:"button"}).html(O.localeStrings.selectAll).bind("click",function(){return dh.find("input:visible").prop("checked",true)}));cY.append($("<button>",{type:"button"}).html(O.localeStrings.selectNone).bind("click",function(){return dh.find("input:visible").prop("checked",false)}));cY.append($("<br>"));cY.append($("<input>",{type:"text",placeholder:O.localeStrings.filterResults,"class":"pvtSearch"}).bind("keyup",function(){var di;di= $(this).val().toLowerCase();return dh.find(".pvtCheckContainer p").each(function(){var dj;dj= $(this).text().toLowerCase().indexOf(di);if(dj!==  -1){return $(this).show()}else {return $(this).hide()}})}));cZ= $("<div>").addClass("pvtCheckContainer").appendTo(dh);cb= dd.sort(t(O.sorters,cf));for(cH= 0,cE= cb.length;cH< cE;cH++){bM= cb[cH];bR= cz[cf][bM];da= $("<label>");db= false;if(O.inclusions[cf]){db= (d.call(O.inclusions[cf],bM)< 0)}else {if(O.exclusions[cf]){db= (d.call(O.exclusions[cf],bM)>= 0)}};dc|| (dc= db);$("<input>").attr("type","checkbox").addClass("pvtFilter").attr("checked",!db).data("filter",[cf,bM]).appendTo(da);da.append($("<span>").text(bM));da.append($("<span>").text(" ("+ bR+ ")"));cZ.append($("<p>").append(da))}};dg= function(){var dk;dk= dh.find("[type='checkbox']").length- dh.find("[type='checkbox']:checked").length;if(dk> 0){cX.addClass("pvtFilteredAttribute")}else {cX.removeClass("pvtFilteredAttribute")};if(dd.length> O.menuLimit){return dh.toggle()}else {return dh.toggle(0,cM)}};$("<p>").appendTo(dh).append($("<button>",{type:"button"}).text("OK").bind("click",dg));de= function(cx){var dl,dm,cc;cc= $(cx.currentTarget).position(),dl= cc.left,dm= cc.top;dh.css({left:dl+ 10,top:dm+ 10}).toggle();dh.find(".pvtSearch").val("");return dh.find(".pvtCheckContainer p").show()};df= $("<span>").addClass("pvtTriangle").html(" &#x25BE;").bind("click",de);cX= $("<li>").addClass("axis_"+ f).append($("<span>").addClass("pvtAttr").text(cf).data("attrName",cf).append(df));if(dc){cX.addClass("pvtFilteredAttribute")};cA.append(cX).append(dh);return cX.bind("dblclick",de)};for(f in cQ){if(!c.call(cQ,f)){continue};cf= cQ[f];j(cf)};cR= $("<tr>").appendTo(cT);ce= $("<select>").addClass("pvtAggregator").bind("change",function(){return cM()});cb= O.aggregators;for(K in cb){if(!c.call(cb,K)){continue};ce.append($("<option>").val(K).html(K))};$("<td>").addClass("pvtVals").appendTo(cR).append(ce).append($("<br>"));$("<td>").addClass("pvtAxisContainer pvtHorizList pvtCols").appendTo(cR);cS= $("<tr>").appendTo(cT);cS.append($("<td>").addClass("pvtAxisContainer pvtRows").attr("valign","top"));cJ= $("<td>").attr("valign","top").addClass("pvtRendererArea").appendTo(cS);if(O.unusedAttrsVertical=== true|| cV){cT.find("tr:nth-child(1)").prepend(cP);cT.find("tr:nth-child(2)").prepend(cA)}else {cT.prepend($("<tr>").append(cP).append(cA))};this.html(cT);cc= O.cols;for(cH= 0,cE= cc.length;cH< cE;cH++){K= cc[cH];this.find(".pvtCols").append(this.find(".axis_"+ ($.inArray(K,cQ))))};cL= O.rows;for(cK= 0,cF= cL.length;cK< cF;cK++){K= cL[cK];this.find(".pvtRows").append(this.find(".axis_"+ ($.inArray(K,cQ))))};if(O.aggregatorName!= null){this.find(".pvtAggregator").val(O.aggregatorName)};if(O.rendererName!= null){this.find(".pvtRenderer").val(O.rendererName)};cC= true;cN= (function(bs){return function(){var V,dn,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB;dy= {derivedAttributes:O.derivedAttributes,localeStrings:O.localeStrings,rendererOptions:O.rendererOptions,sorters:O.sorters,cols:[],rows:[]};ds= (dv= O.aggregators[ce.val()]([])().numInputs)!= null?dv:0;dB= [];bs.find(".pvtRows li span.pvtAttr").each(function(){return dy.rows.push($(this).data("attrName"))});bs.find(".pvtCols li span.pvtAttr").each(function(){return dy.cols.push($(this).data("attrName"))});bs.find(".pvtVals select.pvtAttrDropdown").each(function(){if(ds=== 0){return $(this).remove()}else {ds--;if($(this).val()!== ""){return dB.push($(this).val())}}});if(ds!== 0){du= bs.find(".pvtVals");for(K= dx= 0,dw= ds;0<= dw?dx< dw:dx> dw;K= 0<= dw?++dx:--dx){dr= $("<select>").addClass("pvtAttrDropdown").append($("<option>")).bind("change",function(){return cM()});for(dz= 0,dq= cQ.length;dz< dq;dz++){V= cQ[dz];dr.append($("<option>").val(V).text(V))};du.append(dr)}};if(cC){dB= O.vals;f= 0;bs.find(".pvtVals select.pvtAttrDropdown").each(function(){$(this).val(dB[f]);return f++});cC= false};dy.aggregatorName= ce.val();dy.vals= dB;dy.aggregator= O.aggregators[ce.val()](dB);dy.renderer= O.renderers[cO.val()];dn= {};bs.find("input.pvtFilter").not(":checked").each(function(){var di;di= $(this).data("filter");if(dn[di[0]]!= null){return dn[di[0]].push(di[1])}else {return dn[di[0]]= [di[1]]}});dp= {};bs.find("input.pvtFilter:checked").each(function(){var di;di= $(this).data("filter");if(dn[di[0]]!= null){if(dp[di[0]]!= null){return dp[di[0]].push(di[1])}else {return dp[di[0]]= [di[1]]}}});dy.filter= function(W){var dC,dD;if(!O.filter(W)){return false};for(bM in dn){dC= dn[bM];if(dD= ""+ W[bM],d.call(dC,dD)>= 0){return false}};return true};cJ.pivot(bK,dy);dt= $.extend(O,{cols:dy.cols,rows:dy.rows,vals:dB,exclusions:dn,inclusions:dp,inclusionsInfo:dp,aggregatorName:ce.val(),rendererName:cO.val()});bs.data("pivotUIOptions",dt);if(O.autoSortUnusedAttrs){dA= bs.find("td.pvtUnused.pvtAxisContainer");$(dA).children("li").sort(function(bt,bw){return w($(bt).text(),$(bw).text())}).appendTo(dA)};cJ.css("opacity",1);if(O.onRefresh!= null){return O.onRefresh(dt)}}})(this);cM= (function(bs){return function(){cJ.css("opacity",0.5);return setTimeout(cN,10)}})(this);cM();this.find(".pvtAxisContainer").sortable({update:function(cx,dE){if(dE.sender== null){return cM()}},connectWith:this.find(".pvtAxisContainer"),items:"li",placeholder:"pvtPlaceholder"})}catch(_error){cx= _error;if( typeof console!== "undefined"&& console!== null){console.error(cx.stack)};this.html(O.localeStrings.uiRenderError)};return this};$.fn.heatmap= function(dJ){var dF,dG,f,bL,h,bZ,dH,dI,X,ca;if(dJ== null){dJ= "heatmap"};dI= this.data("numrows");dH= this.data("numcols");dF= function(dK,dN,dM){var dL;dL= (function(){switch(dK){case "red":return function(dO){return "ff"+ dO+ dO};case "green":return function(dO){return dO+ "ff"+ dO};case "blue":return function(dO){return ""+ dO+ dO+ "ff"}}})();return function(K){var dO,dP;dP= 255- Math.round(255* (K- dN)/ (dM- dN));dO= dP.toString(16).split(".")[0];if(dO.length=== 1){dO= 0+ dO};return dL(dO)}};dG= (function(bs){return function(dJ,dK){var dQ,dR,dS;dR= function(bJ){return bs.find(dJ).each(function(){var K;K= $(this).data("value");if((K!= null)&& isFinite(K)){return bJ(K,$(this))}})};dS= [];dR(function(K){return dS.push(K)});dQ= dF(dK,Math.min.apply(Math,dS),Math.max.apply(Math,dS));return dR(function(K,dT){return dT.css("background-color","#"+ dQ(K))})}})(this);switch(dJ){case "heatmap":dG(".pvtVal","red");break;case "rowheatmap":for(f= h= 0,X= dI;0<= X?h< X:h> X;f= 0<= X?++h:--h){dG(".pvtVal.row"+ f,"red")};break;case "colheatmap":for(bL= bZ= 0,ca= dH;0<= ca?bZ< ca:bZ> ca;bL= 0<= ca?++bZ:--bZ){dG(".pvtVal.col"+ bL,"red")}};dG(".pvtTotal.rowTotal","red");dG(".pvtTotal.colTotal","red");return this};return $.fn.barchart= function(){var dU,f,h,dH,dI,X;dI= this.data("numrows");dH= this.data("numcols");dU= (function(bs){return function(dJ){var dR,dM,dV,dS;dR= function(bJ){return bs.find(dJ).each(function(){var K;K= $(this).data("value");if((K!= null)&& isFinite(K)){return bJ(K,$(this))}})};dS= [];dR(function(K){return dS.push(K)});dM= Math.max.apply(Math,dS);dV= function(K){return 100* K/ (1.4* dM)};return dR(function(K,dT){var dW,dX;dW= dT.text();dX= $("<div>").css({"position":"relative","height":"55px"});dX.append($("<div>").css({"position":"absolute","bottom":0,"left":0,"right":0,"height":dV(K)+ "%","background-color":"gray"}));dX.append($("<div>").text(dW).css({"position":"relative","padding-left":"5px","padding-right":"5px"}));return dT.css({"padding":0,"padding-top":"5px","text-align":"center"}).html(dX)})}})(this);for(f= h= 0,X= dI;0<= X?h< X:h> X;f= 0<= X?++h:--h){dU(".pvtVal.row"+ f)};dU(".pvtTotal.colTotal");return this}})}).call(this)