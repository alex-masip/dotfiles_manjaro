chrome.tabs.onUpdated.addListener(checkForValidUrl);chrome.tabs.onActivated.addListener(checkForValidUrl2);var showKeywords=true;var showFunctions=true;var showComments=true;function getCookieN(h){var k=h+ "=";var i=decodeURIComponent(document.cookie);var g=i.split(";");for(var j=0;j< g.length;j++){var f=g[j];while(f.charAt(0)== " "){f= f.substring(1)};if(f.indexOf(k)== 0){return f.substring(k.length,f.length)}};return ""}function checkForValidUrl(c,a,b){if(a.status== "complete"){if(b.url.indexOf("bigquery.cloud.google.com")>  -1){chrome.tabs.executeScript(c,{file:"myscript.js",runAt:"document_end"});if(getCookieN("bqmNotification")== "disabled"){}else {chrome.browserAction.setBadgeText({text:"1"})}}}}function checkForValidUrl2(d){chrome.tabs.query({active:true,currentWindow:true},function(e){e.forEach(function(b){if(b.id== d.tabId){if(b.url.indexOf("bigquery.cloud.google.com")>  -1){if(getCookieN("bqmNotification")== "disabled"){}else {chrome.browserAction.setBadgeText({text:"1"})}}else {chrome.browserAction.setBadgeText({text:""})}}})})}var menuid=chrome.contextMenus.create({"title":"BQ Mate","contexts":["all"],"documentUrlPatterns":["*://bigquery.cloud.google.com/*"]});chrome.contextMenus.create({"parentId":menuid,"title":"Help for \"%s\"","contexts":["selection"],"onclick":onClickHandler,"documentUrlPatterns":["*://bigquery.cloud.google.com/*"]});chrome.contextMenus.create({"parentId":menuid,"title":"Preserve Format","contexts":["all"],"onclick":PreserveFormatHandler,"documentUrlPatterns":["*://bigquery.cloud.google.com/*"]});chrome.contextMenus.create({"parentId":menuid,"title":"SubMenu2","contexts":["all"],"enabled":true,"type":"separator","documentUrlPatterns":["*://bigquery.cloud.google.com/*"]});chrome.contextMenus.create({"parentId":menuid,"title":"Show Query Outline","contexts":["all"],"onclick":ShowOutlineHandler,"documentUrlPatterns":["*://bigquery.cloud.google.com/*"]});var menuid_keywords=chrome.contextMenus.create({"parentId":menuid,"title":"Keywords","contexts":["all"],"type":"checkbox","checked":true,"enabled":false,"documentUrlPatterns":["*://bigquery.cloud.google.com/*"]});var menuid_functions=chrome.contextMenus.create({"parentId":menuid,"title":"Functions","contexts":["all"],"type":"checkbox","checked":true,"enabled":false,"documentUrlPatterns":["*://bigquery.cloud.google.com/*"]});var menuid_Comments=chrome.contextMenus.create({"parentId":menuid,"title":"Comments","contexts":["all"],"type":"checkbox","checked":true,"enabled":false,"documentUrlPatterns":["*://bigquery.cloud.google.com/*"]});function PreserveFormatHandler(l){if(l.pageUrl.indexOf("bigquery.cloud.google.com/")>  -1){chrome.tabs.query({active:true,currentWindow:true},function(e){e.forEach(function(b){var c=b.id;chrome.tabs.sendMessage(c,{action:"preserve-format"},function(m){})})})}}function ShowOutlineHandler(l){if(l.pageUrl.indexOf("bigquery.cloud.google.com/")>  -1){chrome.tabs.query({active:true,currentWindow:true},function(e){e.forEach(function(b){var c=b.id;chrome.tabs.sendMessage(c,{action:"show-outline"},function(m){})})})}}function onClickHandler(l){if(l.pageUrl.indexOf("bigquery.cloud.google.com/")>  -1){chrome.tabs.query({active:true,currentWindow:true},function(e){e.forEach(function(b){var c=b.id;chrome.tabs.sendMessage(c,{action:"show-help",item:l.selectionText},function(m){if(m&& m!= ""){chrome.windows.create({url:m.toLowerCase(),type:"detached_panel",width:560,height:600},function(n){})}})})})}}